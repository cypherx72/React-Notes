

- **The `app/` Folder**:  
    This is the core of a modern Next.js project. It defines your application's routes and page structure.
    
    - Each folder inside `app/` represents a route.
        
    - Special files like `page.js` and `layout.js` define the content and layout of each route.
        
- **`page.js`**:
    
    - Reserved filename.
        
    - Contains a standard React component.
        
    - Treated as a **server component** by default in Next.js.
        
- **Whatâ€™s a Server Component?**
    
    - A component rendered on the server (Node.js), not in the browser.
        
    - If you use `console.log("executing")` inside `page.js`, it wonâ€™t appear in the browserâ€™s developer console.
        
    - Instead, the message shows up in the **terminal** where the Next.js dev server is running.
        
- **Why This Matters**:
    
    - The JSX returned from the server component is converted into static HTML and sent to the client.
        
    - This improves performance and SEO since the content is pre-rendered on the server.
        
- **Key Takeaway**:
    
    - Even though it looks like a typical React component, it behaves differently under the hood due to server-side rendering in Next.js.




- **Purpose of `layout.js`**:
    
    - Acts as a **wrapper** or **shell** for one or more pages.
        
    - Every Next.js app **requires a root `layout.js` file** inside the `/app` directory.
        
    - You can also define **nested layouts** for specific routes (e.g., an `/about/layout.js` that only affects pages under `/about`).
        
- **What It Does**:
    
    - Defines the **HTML skeleton** (like `<html>`, `<body>`) for the application.
        
    - Accepts and uses the **`children` prop** to inject page-specific content.
        
    - This way, each page (from `page.js`) is **injected inside the layout**.
        
- **Why You Use `html` and `body` in Layout**:
    
    - Unlike typical React apps, the **root layout** should include these tags to set up the overall document structure.
        
    - Itâ€™s the only place you directly use these tags in a React component in a Next.js app.
        
- **How Metadata is Handled**:
    
    - You don't use a traditional `<head>` tag manually.
        
    - Instead, you export a reserved constant called `metadata` from your layout file:
        
        ```js
        export const metadata = {
          title: 'Home Page',
          description: 'Welcome to the homepage of our Next.js app.',
        };
        ```
        
    - This is Next.js's way of managing dynamic head content (like title, meta tags, etc.).
        
- **Interaction Between Layout and Page**:
    
    - `layout.js`: Provides the **frame** (navbar, footer, etc.)
        
    - `page.js`: Provides the **content** for a specific route.
        
    - The `children` in `layout.js` represents the **currently active pageâ€™s content**, injected based on the route.
        


#### ğŸ§© Nested Layouts 

- You **can** create additional `layout.js` files in subfolders (e.g., `/meals/layout.js`) to **wrap specific pages**.
    
- These **nested layouts** are **embedded** within the root layout.
    
- Layouts use the special `children` prop to render nested pages/layouts.
    

```jsx
export default function MealsLayout({ children }) {
  return (
    <>
      <p>Meals layout</p>
      {children}
    </>
  );
}
```

- In the example above, `/meals` routes would show the â€œMeals layoutâ€ text, while the root layout remains active (e.g., SVG still renders).
    
Hereâ€™s your **Obsidian-ready markdown note** based on the transcript. This summarizes the **concept of error handling in Next.js using the `error.js` file** and how it works in practice.

---

### ğŸ§± `error.js` File in Next.js â€“ Custom Error Handling

**Purpose**  
`error.js` is a special file used in Next.js app directory routing. It lets you **display a custom UI when an error occurs** in a specific route segment or layout.

---

#### âœ… Use Cases:

- Handling data fetching errors (e.g., DB failures, API failures).
    
- Avoiding the generic Next.js error screen, especially in production.
    
- Providing better UX by showing friendly messages.
    

---

#### ğŸ” How It Works:

- Create `error.js` inside a route or layout folder.
    
- It **only catches errors** in:
    
    - the same folder's page
        
    - any nested layouts/pages
        

> You can add it globally (root `app/` folder) or locally (e.g., `app/meals/`) depending on how granular you want the error handling to be.

---

#### ğŸ› ï¸ Example Setup:

```js
// app/meals/error.js
'use client';

export default function Error({ error }) {
  return (
    <main className="error">
      <h1>An error occurred</h1>
      <p>Failed to fetch meal data. Please try again later.</p>
    </main>
  );
}
```

> âš ï¸ You **must** use `'use client'` because this component runs on the client side to handle both client/server errors.

---

#### âš ï¸ Common Gotchas:

- âœ… Must be a **client component** â€“ otherwise you'll get a build-time error.
    
- âŒ Don't show sensitive error data â€“ Next.js hides server error details in production to avoid leakage.
    
- ğŸ¯ Use `error` prop only for known-safe messages or logging internally.
    

---

#### ğŸ§ª Simulating Errors

You can simulate an error in a data fetching function to test:

```js
// lib/meals.js
export async function getMeals() {
  throw new Error("Loading meals failed"); // just for testing
}
```

---

#### âœ… UX Upgrade

Instead of showing a crash page or broken UI, users now see:

```
An error occurred
Failed to fetch meal data. Please try again later.
```

---

Let me know when you're ready for the next segment, or if you'd like to visualize how `error.js`, `loading.js`, and Suspense all fit into the folder structure.

### ğŸ§± `not-found.js` in Next.js â€“ Custom 404 Pages

**Purpose**  
The `not-found.js` file allows you to **create a custom "404 - Not Found" page** for your application. This replaces the default Next.js error page when users navigate to an unsupported or invalid route.

---

#### ğŸ” How It Works:

- Place a `not-found.js` file inside the `app/` directory.
    
- The fileâ€™s location determines its **scope**:
    
    - At root level: handles all unmatched routes site-wide.
        
    - Nested inside a folder: handles 404s for that segment and its children only.
        

---

#### ğŸ› ï¸ Example Setup:

```js
// app/not-found.js
export default function NotFound() {
  return (
    <main className="not-found">
      <h1>Not found</h1>
      <p>Unfortunately, we could not find the requested page or resource.</p>
    </main>
  );
}
```

> âœ… No need for `'use client'` here â€” it's rendered like a standard server component.

---

#### ğŸ§  When It's Triggered:

- Visiting any invalid URL (e.g., `/my-meals` when that route doesnâ€™t exist).
    
- Programmatically calling the `notFound()` function from inside a page or layout (optional advanced usage).
    

---

#### ğŸ¨ Styling:

- The `not-found` class should be defined in your global CSS (e.g., `globals.css`) for consistent theming.
    

---

#### ğŸ”§ Granularity:

|Level Placed|Handles 404s For|
|---|---|
|`app/not-found.js`|Whole app|
|`app/meals/not-found.js`|Only within `/meals` route and children|

---

Now, invalid routes render a **custom 404 page** with your design and messaging. This improves UX, branding, and clarity.
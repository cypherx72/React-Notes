
---

### âœ… **Core Purpose**

Allows a **child component** to expose a **custom API** to the **parent component** via `ref`.

---

### ðŸ’¡ When to Use

- You want the **parent to control some behavior** (e.g., open/close modal).
    
- But you **donâ€™t want to expose the entire DOM node** â€” only specific methods (like `.open()` or `.close()`).
    
- Ideal when working with **native elements** like `<dialog>`, `<input>`, etc.
    

---

### ðŸ”„ React 19 Context

> React 19 allows direct `ref` passing to child components (like `<ResultModal ref={ref} />`),  
> but `useImperativeHandle` lets you **limit what is exposed**, keeping things clean & safe.

---

### âœï¸ How to Use (1-liner syntax/snippet)

```js
useImperativeHandle(ref, () => ({ open: ..., close: ... }));
```

âœ… Wrap the component in `forwardRef()`  
âœ… Inside, use `useImperativeHandle()` to expose a limited set of functions.

---

### ðŸ”§ Code + Notes

#### **1. Parent Component â€“ Controls the dialog**

```jsx
const dialogRef = useRef();

<ResultModal ref={dialogRef} onReset={...} />

<button onClick={() => dialogRef.current.open()}>Show Dialog</button>
```

ðŸ“Œ The parent calls `open()` or `close()` like it would call any method â€” super clean API.

---

#### **2. Child Component â€“ Custom API with `useImperativeHandle`**

```jsx
const ResultModal = forwardRef(({ onReset }, ref) => {
  const dialog = useRef();

  useImperativeHandle(ref, () => ({
    open: () => dialog.current.showModal(),
    close: () => dialog.current.close(),
  }));

  return (
    <dialog ref={dialog} onClose={onReset}>
      ...
    </dialog>
  );
});
```

âœ… `forwardRef` enables ref receiving  
âœ… `dialog` points to native `<dialog>` element  
âœ… `open`/`close` are exposed to parent via `ref.current`

---

### ðŸ§  Why Use `useImperativeHandle` Instead of Just `ref`

|Without `useImperativeHandle`|With `useImperativeHandle`|
|---|---|
|Parent can manipulate entire DOM|Parent only gets specific, safe methods|
|Risky: can cause unintended effects|Safer and better encapsulated|
|Less readable|Clearer API (like `.open()`, `.close()`)|

---

### ðŸ”‘ Summary

- Use `forwardRef()` â†’ to receive a ref from parent
    
- Use `useImperativeHandle()` â†’ to define a controlled API
    
- Perfect for modals, form controls, or DOM methods you want to expose
    
- Works well with React 19â€™s cleaner ref handling
    

---



---
## ðŸ› ï¸ **Why Add a Loading State?** Â 

When fetching data from a backend, the process can take time (e.g., due to slow network speeds). Without a loading state, users see a blank screen or incomplete UI, which creates a poor experience. Â 

### Solution: Â 

- Add a **loading state** to show a fallback (e.g., "Fetching place data...") while the data is being fetched. Â 

- Update the UI dynamically once the data arrives. Â 


---

## ðŸ–¥ï¸ **Implementing the Loading State** Â 

  
### 1. **Add `isFetching` State**: Â 

Â  Â - Track whether data is being fetched. Â 

Â  Â - Initialize as `false` and update it during the fetch process. Â 


```javascript
const [isFetching, setIsFetching] = useState(false);
```

  
### 2. **Update State During Fetching**: Â 

Â  Â - Set `isFetching` to `true` when the fetch starts. Â 

Â  Â - Set `isFetching` to `false` when the fetch completes. Â 

  

```javascript
useEffect(() => {
Â  const fetchPlaces = async () => {
Â  Â  setIsFetching(true); // Start fetching
Â  Â  const response = await fetch('http://localhost:3000/places');
Â  Â  const data = await response.json();
Â  Â  setAvailablePlaces(data.places); // Update data
Â  Â  setIsFetching(false); // Done fetching
Â  };

Â  fetchPlaces(); // Call the async function
}, []);
```

### 3. **Pass `isFetching` to the Component**: Â 

Â  Â - Use the `isFetching` state to conditionally render a loading message. Â 

  

```javascript
<Places
Â  title="Available Places"
Â  places={availablePlaces}
Â  isLoading={isFetching}
Â  loadingText="Fetching place data..."
/>
```

### 4. **Update the `Places` Component**: Â 

Â  Â - Accept `isLoading` and `loadingText` as props. Â 

Â  Â - Conditionally render the loading message or the data. Â 

  

```javascript
function Places({ title, places, isLoading, loadingText }) {
Â  return (
Â  Â  <div>
Â  Â  Â  <h2>{title}</h2>
Â  Â  Â  {isLoading && <p className="fallback-text">{loadingText}</p>}
Â  Â  Â  {!isLoading && places.length === 0 && (
Â  Â  Â  Â  <p className="fallback-text">No places available.</p>
Â  Â  Â  )}
Â  Â  Â  {!isLoading && places.length > 0 && (
Â  Â  Â  Â  <ul>
Â  Â  Â  Â  Â  {places.map(place => (
Â  Â  Â  Â  Â  Â  <li key={place.id}>{place.title}</li>
Â  Â  Â  Â  Â  ))}
Â  Â  Â  Â  </ul>
Â  Â  Â  )}
Â  Â  </div>
Â  );
}
```


---

## ðŸ”‘ **Key Takeaways** Â 

- Use a **loading state** (`isFetching`) to improve user experience during data fetching. Â 

- Update the UI dynamically to show a loading message while data is being fetched. Â 

- Pass `isFetching` and `loadingText` as props to components for conditional rendering. Â 


---

### ðŸ–¥ï¸ **Final Code Example** Â 

#### `AvailablePlaces.jsx`: Â 

```javascript
import { useEffect, useState } from 'react';
import Places from './Places';

function AvailablePlaces() {
Â  const [availablePlaces, setAvailablePlaces] = useState([]);
Â  const [isFetching, setIsFetching] = useState(false);

Â  useEffect(() => {
Â  Â  const fetchPlaces = async () => {
Â  Â  Â  setIsFetching(true); // Start fetching
Â  Â  Â  const response = await fetch('http://localhost:3000/places');
Â  Â  Â  const data = await response.json();
Â  Â  Â  setAvailablePlaces(data.places); // Update data
Â  Â  Â  setIsFetching(false); // Done fetching
Â  Â  };

Â  Â  fetchPlaces(); // Call the async function
Â  }, []);

Â  return (
Â  Â  <Places
Â  Â  Â  title="Available Places"
Â  Â  Â  places={availablePlaces}
Â  Â  Â  isLoading={isFetching}
Â  Â  Â  loadingText="Fetching place data..."
Â  Â  />
Â  );
}

export default AvailablePlaces;
```

#### `Places.jsx`: Â 

```javascript
function Places({ title, places, isLoading, loadingText }) {
Â  return (
Â  Â  <div>
Â  Â  Â  <h2>{title}</h2>
Â  Â  Â  {isLoading && <p className="fallback-text">{loadingText}</p>}
Â  Â  Â  {!isLoading && places.length === 0 && (
Â  Â  Â  Â  <p className="fallback-text">No places available.</p>
Â  Â  Â  )}
Â  Â  Â  {!isLoading && places.length > 0 && (
Â  Â  Â  Â  <ul>
Â  Â  Â  Â  Â  {places.map(place => (
Â  Â  Â  Â  Â  Â  <li key={place.id}>{place.title}</li>
Â  Â  Â  Â  Â  ))}
Â  Â  Â  Â  </ul>
Â  Â  Â  )}
Â  Â  </div>
Â  );
}

export default Places;
```

---


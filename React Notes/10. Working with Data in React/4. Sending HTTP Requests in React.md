
---
## ğŸŒ **Using the Fetch API** Â 

The `fetch` function is a built-in browser API for sending HTTP requests. It can be used to both **fetch** and **send** data. Â 

### Key Features of `fetch`: Â 

- **URL**: Pass the server URL (e.g., `http://localhost:3000/places`). Â 
- **Default Method**: Sends a `GET` request by default. Â 
- **Returns a Promise**: Resolves to a `response` object. Â 
### *Example*: Â 

```javascript
fetch('http://localhost:3000/places')
Â  .then(response => response.json()) // Parse JSON data
Â  .then(data => {
Â  Â  console.log(data); // Access the response data
Â  });
```

---
  
## ğŸ”„ **Handling Promises** Â 

- **Promises**: Represent asynchronous operations. Â 

- **Chaining `.then()`**: Used to handle the resolved value (e.g., the `response` object). Â 

- **`response.json()`**: Parses the response body as JSON (returns another promise). Â   

### Example with `.then()`: Â 

```javascript
fetch('http://localhost:3000/places')
Â  .then(response => response.json())
Â  .then(data => {
Â  Â  setAvailablePlaces(data.places); // Update state with fetched data
Â  });

```


---

## ğŸ› ï¸ **Using `async/await`** Â 

- **`async/await`**: Provides a cleaner syntax for handling promises. Â 

- **Restriction**: Cannot use `async` directly in React component functions. Â 

### Example with `async/await`: Â 

```javascript
const fetchData = async () => {
Â  const response = await fetch('http://localhost:3000/places');
Â  const data = await response.json();
Â  setAvailablePlaces(data.places);
};
```

---

## ğŸš« **Avoiding Infinite Loops** Â 

Calling `fetch` directly in the component function causes an **infinite loop** because: Â 

1. The component renders and sends a request. Â 
2. The request updates the state. Â 
3. The state update triggers a re-render. Â 
4. The re-render sends another request, and so on. Â 

### Solution: Use `useEffect` Â 

- **`useEffect`**: Ensures the request is sent only once (or when dependencies change). Â 

- **Dependency Array**: Pass an empty array (`[]`) to run the effect only once. Â 
-
### Example with `useEffect`: Â 

```javascript
useEffect(() => {
Â  fetch('http://localhost:3000/places')
Â  Â  .then(response => response.json())
Â  Â  .then(data => {
Â  Â  Â  setAvailablePlaces(data.places); // Update state
Â  Â  });
}, []); // Empty dependency array
```


---

## ğŸ”‘ **Key Takeaways** Â 

- Use `fetch` to send HTTP requests in React. Â 

- Handle promises with `.then()` or `async/await`. Â 

- Use `useEffect` to avoid infinite loops caused by state updates. Â 

- Parse JSON responses with `response.json()`. Â 

---

## ğŸ–¼ï¸ **Fixing Image Loading Issues** Â 

The fetched data contains only the **image file names**, but the actual images are stored in the backend's `images` folder. Â 

### Steps to Display Images: Â 

1. **Construct Image URLs**: Â 

Â  Â Use a template literal to dynamically create the image URL pointing to the backend server. Â 
2. **Example Code**: Â 

Â  Â ```javascript
Â  Â <img
Â  Â  Â src={`http://localhost:3000/${place.image}`}
Â  Â  Â alt={place.title}
Â  Â />
Â  Â ```


3. **Backend Setup**: Â 

Â  Â Ensure the backend exposes the `images` folder (e.g., via a static file server). Â 

---

## ğŸ”‘ **Key Takeaways** Â 

- Use `useEffect` with an empty dependency array to fetch data **once** and avoid infinite loops. Â 

- Construct dynamic URLs for images stored on the backend. Â 

- Ensure the backend server is running and properly configured to serve static files. Â 

---

### ğŸ–¥ï¸ **Final Code Example** Â 

```javascript
import { useEffect, useState } from 'react';

function AvailablePlaces() {
Â  const [availablePlaces, setAvailablePlaces] = useState([]);

Â  useEffect(() => {
Â  Â  fetch('http://localhost:3000/places')
Â  Â  Â  .then(response => response.json())
Â  Â  Â  .then(data => {
Â  Â  Â  Â  setAvailablePlaces(data.places); // Update state
Â  Â  Â  });
Â  }, []); // Fetch data only once

Â  return (
Â  Â  <div>
Â  Â  Â  {availablePlaces.map(place => (
Â  Â  Â  Â  <div key={place.id}>
Â  Â  Â  Â  Â  <img
Â  Â  Â  Â  Â  Â  src={`http://localhost:3000/${place.image}`}
Â  Â  Â  Â  Â  Â  alt={place.title}
Â  Â  Â  Â  Â  />
Â  Â  Â  Â  Â  <h2>{place.title}</h2>
Â  Â  Â  Â  Â  <p>{place.description}</p>
Â  Â  Â  Â  </div>
Â  Â  Â  ))}
Â  Â  </div>
Â  );
}

export defult AvailablePlaces;
```

  

---

  